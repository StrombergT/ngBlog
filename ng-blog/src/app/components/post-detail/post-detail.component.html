<!--Blog Post-->

<div
  *ngIf="post"
  class="flex flex-col max-w-2xl mx-auto my-8 p-6 bg-transparent"
>
  <img class="w-full mb-4 rounded-xl" [src]="post.thumbnailUrl" />
  <h2 class="text-2xl font-bold mb-4 text-center">{{ post.title }}</h2>
  <div class="mb-4">{{ post.body }}</div>

  <div class="flex items-center mt-4">
    <span class="mr-2 text-gray-500"
      >Created: {{ post.creationDate | date }}</span
    >
  </div>

  <div class="mt-4">
    <button
      (click)="likePost()"
      class="text-white font-bold py-1 px-2 rounded-full text-sm relative hover:scale-110 transform transition"
    >
      <i
        class="fas fa-thumbs-up absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-base md:text-lg lg:text-xl text-gray-400 hover:text-blue-400"
      ></i>
      {{ post.likes }}
    </button>
    <button
      (click)="dislikePost()"
      class="text-white font-bold py-1 px-2 rounded-full text-sm relative hover:scale-110 transform transition"
    >
      <i
        class="fas fa-thumbs-down absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-base md:text-lg lg:text-xl text-gray-400 hover:text-red-400"
      ></i>
      {{ post.dislikes }}
    </button>
  </div>

  <!--Comment Section-->
  <div class="mt-6">
    <section *ngIf="comments.length > 0" class="mt-6">
      <h3 class="text-xl font-semibold mb-2">Comments:</h3>
      <ul>
        <li *ngFor="let comment of comments" class="mb-2">
          <span class="font-semibold">{{ comment.name }}:</span>
          {{ comment.body }}
          <div class="mt-4">
            <button
              (click)="likePost()"
              class="text-white font-bold py-1 px-2 rounded-full text-sm relative hover:scale-110 transform transition"
            >
              <i
                class="fas fa-thumbs-up absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-base md:text-lg lg:text-xl text-gray-400 hover:text-blue-400"
              ></i>
              {{ post.likes }}
            </button>
            <button
              (click)="dislikePost()"
              class="text-white font-bold py-1 px-2 rounded-full text-sm relative hover:scale-110 transform transition"
            >
              <i
                class="fas fa-thumbs-down absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-base md:text-lg lg:text-xl text-gray-400 hover:text-red-400"
              ></i>
              {{ post.dislikes }}
            </button>
            <button
              *ngIf="viewService.isAdmin()"
              (click)="removeComment(comment.id)"
              class="ml-2 p-1 text-sm border rounded hover:bg-red-500 hover:text-white focus:outline-none"
            >
              Delete
            </button>
          </div>

          <hr class="border-t border-neutral-200 my-4" />
        </li>
      </ul>
    </section>
    <!-- Display Tags -->
    <div class="mt-4">
      <h3 class="text-xl font-semibold mb-2">Tags:</h3>
      <ul>
        <li *ngFor="let tag of post.tags" class="inline-block mr-2 mb-2">
          <a routerLink="/tags/{{ tag }}" class="bg-gray-300 px-2 py-1 rounded"
            >#{{ tag }}</a
          >
        </li>
      </ul>
    </div>
  </div>
  <div class="mt-4 flex items-center">
    <input
      [(ngModel)]="newComment"
      type="text"
      placeholder="Add a comment..."
      class="flex-grow border p-2 rounded mr-2 focus:outline-none"
    />
    <button
      (click)="addComment()"
      class="px-4 py-2 text-white bg-blue-500 rounded hover:bg-blue-700 focus:outline-none"
    >
      Add Comment
    </button>
  </div>

  <div class="mt-4">
    <button
      *ngIf="viewService.isAdmin()"
      (click)="removePost()"
      class="px-4 py-2 text-white bg-red-500 rounded hover:bg-red-700 focus:outline-none mr-4"
    >
      Delete Post
    </button>
    <button
      (click)="navigateBackToHome()"
      class="px-4 py-2 text-white bg-gray-500 rounded hover:bg-gray-700 focus:outline-none"
    >
      Back to Home
    </button>
  </div>
</div>
